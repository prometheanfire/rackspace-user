require 'vagrant-openstack-plugin'
require 'vagrant-berkshelf'
require 'vagrant-omnibus'

Vagrant.configure("2") do |config|
  config.vm.box = "dummy"
  config.omnibus.chef_version = :latest
  config.berkshelf.enabled = true

  # Make sure the private key from the key pair is provided
  config.ssh.private_key_path = "/home/tcate/.ssh/cbastion.key"

  config.vm.provider :openstack do |os|
    os.server_name = "tc-vagrant"
    os.username = "admin"
    os.api_key  = "0p3nst@ck"
    os.flavor   = "1"
    os.image    = "3bd6d72a-6851-4285-82fe-80bfb4fb53cc"
    os.endpoint = "http://10.240.0.10:5000/v2.0/tokens"
    os.keypair_name = "tcate"
    os.ssh_username = "ubuntu"
  end

  config.vm.provision :chef_solo do |chef|

      chef.add_recipe("chef-client")
      chef.add_recipe("apt")
      chef.add_recipe("apache2")
  end

end
